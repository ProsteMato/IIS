<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0067)https://www.fit.vutbr.cz/study/courses/IIS/private/projekt/doc.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
    
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
<link id="avast_os_ext_custom_font" href="chrome-extension://eofcbnmajmjmplflapaojjnihcjkigck/common/ui/fonts/fonts.css" rel="stylesheet" type="text/css"><script src="chrome-extension://mooikfkahbdckldjjndioackbalphokd/assets/prompt.js"></script></head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

<h1>Sociální sí»: diskuse v diskusních skupinách</h1> <!-- Nahradte názvem svého zadání -->

<dl>
	<dt>Autoøi</dt>
	<dd>Martin Koèi <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xkocim05@stud.fit.vutbr.cz">xautor01@stud.fit.vutbr.cz</a> -
		tvorba a úprava vlákien, príspevkov, rating system
	</dd>
	<dd>Michal Koval <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xkoval17@stud.fit.vutbr.cz">xautor02@stud.fit.vutbr.cz</a> -
		tvorba a úprava skupín a hlavnej stránky
	</dd>
  <dd>Magdaléna Ondru¹ková <!-- Nahraïte skuteèným jménem a e-mailem autora a popisem èinnosti -->
	    <a href="mailto:xondru16@stud.fit.vutbr.cz">xautor03@stud.fit.vutbr.cz</a> -
		tvorba u¾ívateµa, vyhµadávanie, admin, správa rolí
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="http://www.stud.fit.vutbr.cz/~xautor01/IIS">http://www.stud.fit.vutbr.cz/~xautor01/IIS</a></dd>
	<dd>(pokud má aplikace více vstupních stránek, napi¹te obdobnì dal¹í URL)</dd>
</dl>

<h2>U¾ivatelé systému pro testování</h2>
<table>
<tbody><tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin@email.com</td><td>test00</td><td>Administrátor</td></tr>
<tr><td>user@email.com</td><td>test00</td><td>Registrovaný u¾ívateµ</td></tr>

</tbody></table>

<h2>Testovanie rolí u¾ívateµa vrámci skupín</h2>
<table>
    <tbody><tr><th>U¾ívateµ</th><th>Skupina</th><th>Rola v skupine</th></tr>
        <tr><td>user@email.com</td><td>Group-owner</td><td>vlastník skupiny</td></tr>
        <tr><td>user@email.com</td><td>Group-mod</td><td>moderátor skupiny</td></tr>
        <tr><td>user@email.com</td><td>Group-member</td><td>èlen skupiny</td></tr>
        <tr><td>user@email.com</td><td>Group-join</td><td>otvorená skupina</td></tr>
        <tr><td>user@email.com</td><td>Group-apply</td><td>neotvorená skupina</td></tr>
    </tbody>
</table> <br>
Otvorená skupina = Ktokoµvek sa mô¾e prida» <br>
Zatvorená skupina = ®iados» o èlenstvo musí by» schválená vlastníkom/moderátorom<br>

<h4>Prehµad registrovaných u¾ívateµov</h4>
<table>
	<tbody>
	<tr><th>U¾ívateµ</th><th>Nastavenie viditeµnosti profilu</th></tr>
	<tr><td>admin@email.com</td><td>Nikto</td></tr>
	<tr><td>user@email.com</td><td>Iba registrovaný u¾ívatelia</td></tr>
	<tr><td>user2@email.com</td><td>Iba èlenovia skupín</td></tr>
	<tr><td>user3@email.com</td><td>V¹etci</td></tr>
	</tbody>
</table>
Pre ka¾dého u¾ívateµa je heslo: test00<br>

<h2>Implementace</h2>

<h3>Backend</h3>
Ako implementaèný jazyk sme si zvolili php, a to konkrétne framework Symfony.

<h4>Controllery:</h4>
<b>AdminController.php</b> popisuje funkcionalitu pre administrátora. Administrátor mô¾e vymaza» u¾ívateµa, a takisto
si vie zobrazi» list v¹etkých registrovaných u¾ívateµov a skupín. Takisto vie vymaza» skupinu. <br><br>
<b>GroupController.php</b> popisuje základnú funkcionalitu okolo skupín. U¾ívateµ si mô¾e skupinu zobrazi», prípadne
si vie zobrazi» list skupín, kde je èlenom. Takisto vie vytvori» novú skupinu. Skupinu mô¾e vymaza» iba administrátor
alebo majiteµ skupiny. U¾ívateµ mô¾e poda» ¾iados» o pridanie do skupiny (ak skupina nemá nastavené, ¾e ktokoµvek sa
mô¾e prida»), takisto mô¾e odstráni» túto ¾iados». Meni» nastavenia súkromia a informácie o skupine vie iba majiteµ
skupiny alebo administrátor. Ka¾dý èlen (a¾ na majiteµa) mô¾e opusti» skupinu. Majiteµ skupiny alebo administrátor mô¾u
meni» moderátorov skupiny (pridáva»/schvalova» ¾iadosti o moderátora/vymaza»). Moderátor sa vie sám vzda» moderátorstva
v skupine. Ka¾dý èlen skupiny si vie poda» ¾iados» o to, aby bol moderátorom skupiny. Moderátor skupiny mô¾e
prija» nových èlenov, prípadne vyhodi» èlenov (ak nie sú vlastníkom alebo moderátorom skupiny).<br><br>
<b>MainController.php</b> implementuje zobrazenie hlavnej stránky pre prihláseného/neprihláseného u¾ívateµa. Vrámci
zobrazenia si mô¾e u¾ívateµ vybra», na základe akého filtra mu budú príspevky zobrazené. <br><br>
<b>PostController.php</b> implementuje pridanie nového príspevku, vymazanie príspevku a zmenu ratingu u príspevku. <br><br>
<b>RegistrationController.php</b> implementuje registráciu u¾ívateµa.<br><br>
<b>SearchController.php</b>  implementuje funkcionalitu ohµadne vyhµadávania u¾ívateµov a skupín.<br><br>
<b>SecurityController.php</b> implementuje prihlásenie a odhlásenie u¾ívateµa. <br><br>
<b>ThreadController.php</b> popisuje funkciu ohµadne vlákien v skupine. U¾ívateµ si mô¾e vlákno zobrazi». Vlákno mô¾e by»
vymazané (ako u¾ bolo vy¹¹ie spomenuté). Takisto implementuje zmenu rankingu u vlákna. <br><br>
<b>UserController.php</b> popisuje funkcionalitu ohµadne u¾ívateµa - zobrazenie u¾ívateµského profilu, zmena údajov a takisto
odstránenie u¾ívateµského profilu.
<br><br>

<h3>Fronted</h3>
Stránky boli vytvárané pomocou jednotlivých .html.twig súborov v prieèinku <b>templates</b>. Jednotlivé súbory
reprezentujú v¾dy nejakú stránku, ktorá sa zobrazuje u¾ívateµovi (boli vyrenderované vrámci funkcie v controlleri).
Jednotlivé stránky sú ulo¾ené vo viacerých prieèinkov, najmä kvôli prehµadnosti - ka¾dý jeden súbor má ale spoloèný
základ v súbore base.html.twig. Vrámci projektu sme sa rozhodli
zakombinova» do view aj voµne dostupnú bootstrap ¹ablónu Darkly.

<h3>Databáza</h3>
Pre databázu sme si vybrali MySQL. Databáza bola implementovaná podµa nasledujúceho schématu:
<image src="./schema.png"></image><br><br>
<h2>Instalace</h2>

Pospis in¹talácie na local host (návod bol robený pre u¾ívateµov Ubuntu):
<ul>
	<ol>
		<li>
			Stiahnem si prieèinok z projektom
		</li>
		<li>
			Nain¹talujte si v¹etky potrebné súbory pomocou composer install
		</li>
		<li>
			V .env súbore si treba vyplni» do polo¾ky DATABASE_URL podµa example
		</li>
		<li>
			Vytvorým si databázu pomocou príkazu <b>php bin/console doctrine:database:create</b>
		</li>
			Ak chcete naplni» databázu pomocou testovacích dát pou¾ite príkaz <b>mysql -uUSER_NAME DATABASE_NAME -pPASSWORD < database/create_database.sql</b>
			za USER_NAME, DATABASE_NAME a PASSWORD si dajte vlastné údaje z .env súboru z polo¾ky DATABASE_URL
		<li>
		<li>
			Databázu ak chcete viete vymaza» pomocou <b>php bin/console doctrine:schema:drop --force</b>
			(Ak chcete pridáva» zase testovacie dáta pomocou príkazu èo bol zmienený vy¹ie je lep¹ie pou¾i» najskôr tento príkaz inak to nebude fungova» kvôli právam)
		</li>
		<li>
			Server si viete spusti» pomocou <b>symfony server:start</b> a aplikácia by mala be¾a».
		</li>
	</ol>
	<li>
		Softwarové po¾adavky:
		php: >= 7.2.5
		composer: >= 2.0.7
		mysql >= 14.14
		symfony >= 4.21.0
	</li>
</ul>


Pospis in¹talácie na Heroku (návod bol robený pre u¾ívateµov Ubuntu):
<ul>
	<ol>
		<li>
			Stiahnem si prieèinok z projektom
		</li>
		<li>
			Otvorime si terminal a prihlásime sa do násho existujúceho heroku úètu pomocou <b>heroku login</b>
		</li>
		<li>
			Nasledne si otvorime prieèinok projektu. Spustíme príkaz <b>heroku create</b>
		</li>
		<li>
			Pre vytvorenie databázy na heroku pou¾ijete príkaz <b>heroku addons:create cleardb:ignite</b>
		</li>
		<li>
			Následne si viete získa» odkaz na pripojenie do databáze pomocou príkazu <b>heroku config | grep CLEARDB_DATABASE_URL</b>.
			Výsledok príkazu si zapí¹te do .env súboru v projekte do políèka DATABASE_URL
		</li>
		<li>
			Ulo¾te v¹etky zmeny pomocou <b>git add .evn</b> a <b>git commit -m "edit .env"</b>
		</li>
		<li>
			Ako posledné v¹etky zmeny nahrajte na heroku <b>git push heroku main</b>
		</li>
		<li>
			Do databáze viete nahra» testovacie dáta pomocou príkazu <b>mysql -uUSER_NAME DATABASE_NAME -pPASSWORD --host=HOST < database/create_database.sql</b>
			na USER_NAME, DATABASE_NAME, PASSWORD a HOST si dajte vlastné údaje z .env súboru z polo¾ky DATABASE_URL
		</li>
		<li>
			Databázu ak chcete viete vymaza» pomocou <b>heroku run php bin/console doctrine:schema:drop --force</b>
			(Ak chcete pridáva» zase testovacie dáta pomocou príkazu èo bol zmienený vy¹ie je lep¹ie pou¾i» najskôr tento príkaz inak to nebude fungova» kvôli právam)
		</li>
	</ol>
	<li>
		Softwarové po¾adavky:
			php: >= 7.2.5
			git: >= 2.17.1
			heroku >= 7.47.3
			mysql >= 14.14
	</li>
</ul>



<h2>Známé problémy</h2>
<ul>
	<li>
		Databáza, ktorú pou¾ívame na heroku hostingu (CleanDB) má pre u¾ívateµov, ktorý pou¾ívajú jej free verziu obmedzený
		poèet po¾iadavkov na databázu na hodinu. Preto ak sa zavolá na databázu veµa dotazov za hodinu stránka prestane fungova».
	</li>
	<li>
		Pri naèítavaný súborov pri v¹etkých formulároch sa do formuláru nevypí¹e názov súboru ktorý sme zvolili. Je chyba zvolenej boostrap ¹ablony
		Darkly.
	</li>

</body></html>